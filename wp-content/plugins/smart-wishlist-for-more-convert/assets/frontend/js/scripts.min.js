"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var o;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(o="Object"===(o=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,e):void 0}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,a=new Array(e);o<e;o++)a[o]=t[o];return a}function ownKeys(e,t){var o,a=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,o)),a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach(function(t){_defineProperty(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function _defineProperty(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function _typeof2(t){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(B){B.noConflict(),B(document).ready(function(){var n,t,m=[],p=[],e=wlfmc_l10n.lang,r=null,o=wlfmc_l10n.wishlist_items,a=wlfmc_l10n.waitlist_items,s=!1;function l(){var t=document.querySelectorAll(".wlfmc-wishlist-table .quantity");if(!(t.length<1))for(var e=0;e<t.length;e++){if(t[e].classList.contains("hidden"))return;var o=t[e].querySelector(".botiga-quantity-plus, a.plus, .ct-increase"),a=t[e].querySelector(".botiga-quantity-minus, a.minus, .ct-decrease");if(!o||!a||o.length<1||a.length<1)return;o.classList.add("show"),a.classList.add("show");var i=o.cloneNode(!0),n=a.cloneNode(!0);i.addEventListener("click",function(t){t.preventDefault();var t=this.parentNode.querySelector(".qty"),e=parseFloat(t.value,10)||0,o=document.createEvent("HTMLEvents"),a=t.getAttribute("max")&&parseFloat(t.getAttribute("max"),0)||1/0;return t.value=e<a?Math.round(100*(e+parseFloat(t.step||"1")))/100:a,o.initEvent("change",!0,!1),t.dispatchEvent(o),!1}),n.addEventListener("click",function(t){t.preventDefault();var t=this.parentNode.querySelector(".qty"),e=parseFloat(t.value,10)||0,o=document.createEvent("HTMLEvents"),a=t.getAttribute("min")?Math.round(100*parseFloat(t.getAttribute("min"),0))/100:0;return t.value=a<e?Math.round(100*(e-parseFloat(t.step||"1")))/100:a,o.initEvent("change",!0,!1),t.dispatchEvent(o),!1}),t[e].replaceChild(i,o),t[e].replaceChild(n,a)}}function c(t){var e,o,a,i,n,r,l,c,s,d,f;t.hasClass("position-absolute")?(c=(s=t.offset()).left,s=s.top,d=t.outerWidth(),e=t.outerHeight(),n=c-(c=parseFloat(t.css("left"))),o=s-(s=parseFloat(t.css("top"))),c=c,s=s,l=(f=B(window).width())-n-d-50,r=50-n,i=(a=B(document).height())-o-e-50,f<=d?c=-1*n:f-(d+100)<0?c=(f-d)/2-n:0<r?c=r:l<0&&(c=l),a<e&&(t.height(a-t.outerHeight()+t.height()),e=t.outerHeight()),a<=e?s=-1*o:a-(e+100)<0?s=(a-e)/2-o:i<0&&(s=i),t.css({left:c,top:s})):void 0!==(n=B(".wlfmc-counter-wrapper."+t.attr("data-id")))&&0<n.length&&(r=n.offset(),l=B(window).scrollTop(),c=r.left,s=r.top+n.height()-l,d=t.outerWidth(),f=B(window).width(),t.css({left:c=f<c+d?f-d-20:c,top:s}))}function d(t){var e,o,a;0<!t.closest(".wlfmc-counter-wrapper").find(".position-fixed").length||(e=t.closest(".wlfmc-counter-wrapper").find(".wlfmc-counter-items").hasClass("wlfmc-lists-counter-dropdown")?"wlfmc-premium-list-counter":t.closest(".wlfmc-counter-wrapper").hasClass("wlfmc-waitlist-counter-wrapper")?"wlfmc-waitlist-counter":"wlfmc-wishlist-counter",0<t.closest(".elementor-widget-wlfmc-wishlist-counter").length||0<t.closest(".elementor-widget-wlfmc-waitlist-counter").length||0<t.closest(".elementor-widget-wlfmc-premium-list-counter").length?(a=t.closest(".elementor-widget-wlfmc-wishlist-counter").data("id")||t.closest(".elementor-widget-wlfmc-waitlist-counter").data("id")||t.closest(".elementor-widget-wlfmc-premium-list-counter").data("id"),o=t.closest("[data-elementor-id]").data("elementor-id"),B("<div class='wlfmc-elementor elementor elementor-"+o+" "+e+"'><div class='elementor-element elementor-element-"+a+"'></div></div>").appendTo("body"),B(".wlfmc-elementor.elementor-"+o+" .elementor-element-"+a).append(t)):0<!t.closest(".wlfmc-elementor").length&&(a=t.closest(".wlfmc-counter-wrapper").find(".wlfmc-counter-items").data("id"),B("<div class='wlfmc-elementor no-elementor-"+a+" "+e+"'></div>").appendTo("body"),B(".wlfmc-elementor.no-elementor-"+a).append(t)))}function u(){B(".wlfmc-counter-dropdown").removeClass("lists-show");var t=B(".dropdown_"+B(this).attr("data-id"))||B(this).closest(".wlfmc-counter-wrapper").find(".wlfmc-counter-dropdown");d(t.closest(".wlfmc-counter-wrapper")),c(t),t.addClass("lists-show")}function _(){var t=B(this).closest(".wlfmc-counter-wrapper").find(".wlfmc-counter-dropdown");B(".wlfmc-first-touch").removeClass("wlfmc-first-touch"),B(".wlfmc-first-click").removeClass("wlfmc-first-click"),t.removeClass("lists-show")}function i(){B(document).trigger("wlfmc_init")}function E(){B("table.wlfmc-wishlist-items-wrapper").filter(".sortable").not(".no-interactions").each(function(){var n=B(this),r=!1;n.sortable({items:"[data-row-id]",handle:".sortable-handle",placeholder:"ui-sortable-placeholder",scroll:!0,tolerance:"pointer",helper:function(t,e){return e.children().each(function(){var t=B(this).closest(".wishlist-items-wrapper").find(".show-meta-data");0<t.length&&t.removeClass("show-meta-data"),0<(t=B(this).closest(".wishlist-items-wrapper").find(".wlfmc-row-meta-data")).length&&t.addClass("hide")}),e},update:function(t,e){var o=n.find("[data-row-id]"),a=[],i=0;o.length&&(r&&r.abort(),o.each(function(){var t=B(this),e=(t.find('input[name*="[position]"]').val(i++),a.push(t.data("row-id")),t.closest(".wishlist-items-wrapper").find(".parent-row-id-"+t.data("row-id")));0<e.length&&t.after(e)}),r=B.ajax({data:{action:wlfmc_l10n.actions.sort_wishlist_items,nonce:wlfmc_l10n.ajax_nonce.sort_wishlist_items_nonce,context:"frontend",positions:a,wishlist_token:n.data("token"),page:n.data("page"),per_page:n.data("per-page")},method:"POST",url:wlfmc_l10n.admin_url}))}}).disableSelection()})}function A(){function i(t,e){var o,e=B(e),t=B(t),a=B("body").offset(),i=(B("body").css({position:"relative"}),l.show(),l.hide(),(e.outerHeight()-t.outerHeight())/2),n=-t.outerWidth()/2+e.outerWidth()/2,n={top:[-t.outerHeight()-7,n],right:[i,e.outerWidth()+7],bottom:[e.outerHeight()+7,n],left:[i,-t.outerWidth()-7]},i=["top","right","bottom","left"];Object.keys(n),"top"===l.direction||"bottom"===l.direction?(t.css("top",e.offset().top-a.top+n[l.direction][0]),t.css("left",e.offset().left-a.left+3.5+n[l.direction][1])):(o=(o=n[l.direction][0]-3.5)<0?o+3.5:o,t.css("top",e.offset().top-a.top+o),t.css("left",e.offset().left-a.left+n[l.direction][1])),r(t)&&(l.direction=i[i.indexOf(l.direction)+1]),l.show()}var r=function(t){return t.offsetLeft+t.offsetWidth<0||t.offsetTop+t.offsetHeight<0||t.offsetLeft+t.offsetWidth>window.innerWidth||t.offsetTop+t.offsetHeight>window.innerHeight},l=new function(){var a=this;this.idSelector="wlfmc-tooltip",this.text="",this.top=0,this.left=0,this.direction=void 0!==this.direction?this.direction:"bottom",this.t_type=void 0!==this.t_type?this.t_type:"default",this.target="",this.node=document.getElementById(this.idSelector),this.node||(this.node=document.createElement("div"),this.node.setAttribute("id",this.idSelector),this.node.className=this.node.className+"tooltip__hidden",this.node.innerHTML=this.text,document.body.appendChild(this.node)),this.show=function(){var t=["top","right","bottom","left"],e=(a.node.innerHTML=a.text,a.direction),o=a.t_type;e?B(this.node).addClass("tooltip__expanded tooltip__expanded-"+e):B(this.node).addClass("tooltip__expanded"),B(this.node).addClass("wlfmc-tooltip-"+o),B(this.node).removeClass("tooltip__hidden"),r(B(l.node))&&(l.hide(),l.direction=t[t.indexOf(l.direction)+1],i(l.node,l.target))},this.hide=function(){B(a.node).css("top","0"),B(a.node).css("left","0"),B(a.node).attr("class",""),B(a.node).addClass("tooltip__hidden")}};B(".wlfmc-tooltip").on("mouseover",function(t){(l.target=this).className.split(" ").forEach(function(t){-1!=t.indexOf("wlfmc-tooltip-")&&(l.direction=t.split("-")[t.split("-").length-1])}),B(this).attr("data-tooltip-type")&&(l.t_type=B(this).attr("data-tooltip-type")),B(this).attr("data-tooltip-text")&&(l.text=B(this).attr("data-tooltip-text"),i(l.node,l.target))}),B(".wlfmc-tooltip").on("mouseout",function(t){l.hide()})}function L(){0<B(".woocommerce-product-gallery__wrapper .wlfmc-top-of-image").length&&B(".woocommerce-product-gallery__wrapper .wlfmc-top-of-image").each(function(){B(this).insertAfter(B(this).parent())});for(var t=document.querySelectorAll(".wlfmc-top-of-image"),e=0;e<t.length;e++){var o=t[e];if(o.nextElementSibling){var a=_toConsumableArray(o.nextElementSibling.classList).find(function(t){return t.startsWith("wlfmc_position_image_")});if(a===_toConsumableArray(o.classList).find(function(t){return t.startsWith("wlfmc_position_image_")}))if("wlfmc_position_image_top_left"===a||"wlfmc_position_image_top_right"===a){for(var i="".concat(o.offsetHeight+5,"px"),n=o.previousElementSibling;n&&n.classList.contains("wlfmc-top-of-image")&&n.classList.contains(a);)i="calc( ".concat(i," + ").concat(n.offsetHeight+5,"px )"),n=n.previousElementSibling;o.nextElementSibling.style.marginTop=i}else if("wlfmc_position_image_bottom_left"===a||"wlfmc_position_image_bottom_right"===a){for(var r="".concat(o.offsetHeight+5,"px"),l=o.previousElementSibling;l&&l.classList.contains("wlfmc-top-of-image")&&l.classList.contains(a);)r="calc( ".concat(r," + ").concat(l.offsetHeight+5,"px )"),l=l.previousElementSibling;o.nextElementSibling.style.marginBottom=r}}}}function R(){var a=B(".wlfmc-wishlist-table, .wlfmc-save-for-later-table").find('tbody .product-checkbox input[type="checkbox"]'),i=B(".multiple-product-move,.multiple-product-copy");a.off("change").on("change",function(t){t.preventDefault();var e,t=B(this),o=t.parent();return t.is(":checked")||(B('input[name="'+t.attr("name")+'"]').prop("checked",!1),B("#bulk_add_to_cart").prop("checked",!1),B("#bulk_add_to_cart2").prop("checked",!1)),o.removeClass("checked").removeClass("unchecked").addClass(t.is(":checked")?"checked":"unchecked"),0<i.length&&(a.is(":checked")?i.show():i.hide(),o=B(this).closest("tr").attr("data-item-id"),e=i.attr("data-item-id"),t.is(":checked")?e=e?((e=e.split(",")).push(o),e.join(",")):o:e&&(-1!==(t=(e=e.split(",")).indexOf(o))&&e.splice(t,1),e=e.join(",")),i.attr("data-item-id",e)),!1}).trigger("change")}function w(){l(),R(),J(),X(),A(),z(),E(),h(),B(document).trigger("wlfmc_init_after_ajax")}function J(){var n,r;B(".wlfmc-wishlist-table , .wlfmc-save-for-later-table").on("change",".quantity :input",function(){var t=B(this),e=t.closest("[data-row-id]"),o=e.data("row-id"),a=e.data("cart-item-key"),i=t.closest(".wlfmc-wishlist-table,.wlfmc-save-for-later-table").data("token");clearTimeout(r),e.find(".add_to_cart_button").attr("data-quantity",t.val()),r=setTimeout(function(){n&&n.abort(),n=B.ajax({url:wlfmc_l10n.ajax_url,data:{action:wlfmc_l10n.actions.update_item_quantity,nonce:wlfmc_l10n.ajax_nonce.update_item_quantity_nonce,context:"frontend",product_id:o,cart_item_key:a,wishlist_token:i,quantity:t.val()},method:"POST",beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),y(e)},complete:function(){k(e)},success:function(t){j()}})},1e3)})}function z(){var o,a;B(".wlfmc-toggle-layout").on("click",function(t){t.preventDefault();var e=B(this);return e.toggleClass("list").toggleClass("grid"),e.closest(".wlfmc-wishlist-form").find(".wlfmc-list").toggleClass("view-mode-list").toggleClass("view-mode-grid"),clearTimeout(a),a=setTimeout(function(){o&&o.abort(),o=B.ajax({url:wlfmc_l10n.ajax_url,data:{action:wlfmc_l10n.actions.change_layout,nonce:wlfmc_l10n.ajax_nonce.change_layout_nonce,context:"frontend",new_layout:e.hasClass("list")?"grid":"list"},method:"POST",beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce)},complete:function(){}})},1e3),!1})}function h(){B(document).on("change",".list-item-checkbox",function(){var t,e=B(this).closest(".list-item"),o=B(this).closest(".wlfmc-add-to-list-container, .wlfmc-move-to-list-wrapper, .wlfmc-copy-to-list-wrapper");o.hasClass("wlfmc-add-to-list-container")&&(B(this).is(":checked")?e.addClass("selected"):e.removeClass("selected")),(o.hasClass("wlfmc-move-to-list-wrapper")||o.hasClass("wlfmc-copy-to-list-wrapper"))&&(t=o.find('input[type="checkbox"]'),o.find(".list-item").removeClass("selected"),B(this).is(":checked")&&(e.addClass("selected"),t.not(B(this)).prop("checked",!1)))})}function X(){B(".copy-link-trigger").on("click",function(t){t.stopImmediatePropagation(),t.preventDefault();t=B(this),t=B("<input/>",{val:t.attr("data-href"),type:"text"});return B("body").append(t),navigator.userAgent.match(/ipad|iphone/i)?t[0].setSelectionRange(0,9999):t.select(),document.execCommand("copy"),t.remove(),toastr.success(wlfmc_l10n.labels.link_copied),!1})}function g(t,e,o,a){B.ajax({url:wlfmc_l10n.ajax_url,data:{action:wlfmc_l10n.actions.load_automations,nonce:wlfmc_l10n.ajax_nonce.load_automations_nonce,context:"frontend",product_id:parseInt(t),wishlist_id:parseInt(e),customer_id:parseInt(o),list_type:a},method:"POST",beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce)},complete:function(){}})}function F(t,e){t={action:wlfmc_l10n.actions.add_to_save_for_later_action,nonce:wlfmc_l10n.ajax_nonce.add_to_save_for_later_nonce,context:"frontend",add_to_save_for_later:t};x()?B.ajax({url:wlfmc_l10n.save_for_later_ajax_url,data:t,type:"POST",cache:!1,beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),e&&e.length&&v(e)},complete:function(){e&&e.length&&b(e)},success:function(t){var e=t.result,o=t.message;"true"===e&&(j(),""!==B.trim(wlfmc_l10n.labels.sfl_product_added_text)&&toastr.success(wlfmc_l10n.labels.sfl_product_added_text),g(t.product_id,t.wishlist_id,t.customer_id,"save-for-later"),"undefined"!==t.count&&B(".wlfmc-tabs-wrapper").attr("data-count",t.count),B(document.body).trigger("wc_update_cart")),""!==B.trim(t.message)&&"true"!==e&&toastr.error(o)}}):window.alert(wlfmc_l10n.labels.cookie_disabled)}function M(c,s,d){var f,t;s&&d&&(f="variation",c||(d=s,f="variable"),t=B('.wlfmc-add-to-waitlist [data-parent-product-id="'+s+'"]'),B('.wlfmc-add-to-outofstock [data-parent-product-id="'+s+'"]').each(function(){var t=B(this),e=t.closest(".wlfmc-add-to-outofstock"),t=(t.attr("data-parent-product-id",s),t.attr("data-product-id",d),e.removeClass(function(t,e){return e.match(/wlfmc-add-to-outofstock-\S+/g).join(" ")}).addClass("wlfmc-add-to-outofstock-"+d).removeClass("exists"),B(".wlfmc-add-to-outofstock-"+d));0===t.length&&(t=B(".wlfmc-add-to-outofstock-"+s)),null!==c?c.is_in_stock||S(c.exclude_back_in_stock)?t.addClass("hide"):t.removeClass("hide"):S(t.data("product-outofstock"))?t.removeClass("hide"):t.addClass("hide"),B.each(p,function(t,e){var o;void 0!==e&&e.product_id&&e.product_id===d&&((o=B(".wlfmc-add-to-outofstock-"+e.product_id)).removeClass("exists"),o.each(function(){S(e.back_in_stock)&&B(this).addClass("exists")}))}),t.find(".wlfmc-add-button > a").attr("data-parent-product-id",s).attr("data-product-id",d).attr("data-product-type",f)}),t.each(function(){var t=B(this),o=t.closest(".wlfmc-add-to-waitlist"),a=B("#"+t.closest(".wlfmc-add-to-waitlist").data("popup-id")),e=!!a.length&&a.find('input[name="list_back-in-stock"]'),i=!!a.length&&a.find('input[name="list_price-change"]'),n=!!a.length&&a.find('input[name="list_low-stock"]'),r=!!a.length&&a.find('input[name="list_on-sale"]'),l=o.data("available-lists");o.removeClass("opacity-half"),c&&(c.is_in_stock?(0<n.length&&(c.enable_low_stock&&S(c.enable_low_stock)&&!S(c.exclude_low_stock)?n.closest(".list-item").removeClass("hide"):n.closest(".list-item").addClass("hide")),0<i.length&&(S(c.exclude_price_change)?i.closest(".list-item").addClass("hide"):i.closest(".list-item").removeClass("hide")),0<e.length&&e.closest(".list-item").addClass("hide"),0<r.length&&(c.display_price!==c.display_regular_price||S(c.exclude_on_sale)?r.closest(".list-item").addClass("hide"):r.closest(".list-item").removeClass("hide")),a.find(".wlfmc-waitlist-select-type .list-item:not(.hide)").length||o.addClass("opacity-half")):"object"===_typeof2(l)&&"back-in-stock"in l&&!S(c.exclude_back_in_stock)?(0<e.length&&e.closest(".list-item").removeClass("hide"),0<i.length&&i.closest(".list-item").addClass("hide"),0<n.length&&n.closest(".list-item").addClass("hide"),0<r.length&&r.closest(".list-item").addClass("hide")):o.addClass("opacity-half")),t.attr("data-parent-product-id",s),t.attr("data-product-id",d),a.find('input[name="list_back-in-stock"]').prop("checked",!1),a.find('input[name="list_price-change"]').prop("checked",!1),a.find('input[name="list_on-sale"]').prop("checked",!1),a.find('input[name="list_low-stock"]').prop("checked",!1),o.removeClass(function(t,e){return e.match(/wlfmc-add-to-waitlist-\S+/g).join(" ")}).addClass("wlfmc-add-to-waitlist-"+d).removeClass("exists"),B.each(p,function(t,e){void 0!==e&&e.product_id&&e.product_id==d&&((S(e.price_change)||S(e.on_sale)||S(e.low_stock)||S(e.back_in_stock)&&0<a.find('input[name="list_back-in-stock"]').length)&&o.addClass("exists"),S(e.back_in_stock)&&a.find('input[name="list_back-in-stock"]').prop("checked",!0),S(e.price_change)&&a.find('input[name="list_price-change"]').prop("checked",!0),S(e.on_sale)&&a.find('input[name="list_on-sale"]').prop("checked",!0),S(e.low_stock)&&a.find('input[name="list_low-stock"]').prop("checked",!0))}),a.find(".wlfmc_add_to_waitlist").attr("data-parent-product-id",s).attr("data-product-id",d).attr("data-product-type",f),"variable"===f&&S(wlfmc_l10n.waitlist_required_product_variation)?o.find(".wlfmc-popup-trigger").addClass("wlfmc-disabled"):o.find(".wlfmc-popup-trigger").removeClass("wlfmc-disabled")}))}function v(t){0<t.find("i").length?t.addClass("wlfmc-action wlfmc-loading"):t.addClass("wlfmc-action wlfmc-loading-alt")}function b(t){t.removeClass("wlfmc-loading wlfmc-loading-alt")}function y(t){void 0!==B.fn.block&&wlfmc_l10n.enable_ajax_loading&&t.fadeTo("400","0.6").block({message:null,overlayCSS:{background:"transparent url("+wlfmc_l10n.ajax_loader_url+") no-repeat center",backgroundSize:"40px 40px",opacity:1}})}function k(t){void 0!==B.fn.unblock&&(t.stop(!0).css("opacity","1").unblock(),B(".tooltip__expanded").removeClass().addClass("tooltip__hidden"))}function x(){if(navigator.cookieEnabled)return 1;document.cookie="cookietest=1";var t=-1!==document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}function U(t){var o={},e=null;return t?"object"===_typeof2(t)?(e=(t=B.extend({fragments:null,s:"",container:B(document),firstLoad:!1},t)).fragments||t.container.find(".wlfmc-wishlist-fragment"),t.s&&(e=e.not("[data-fragment-ref]").add(e.filter('[data-fragment-ref="'+t.s+'"]'))),t.firstLoad&&(e=e.filter(".on-first-load"))):(e=B(".wlfmc-wishlist-fragment"),"string"!=typeof t&&"number"!=typeof t||(e=e.not("[data-fragment-ref]").add(e.filter('[data-fragment-ref="'+t+'"]')))):e=B(".wlfmc-wishlist-fragment"),e.length?(e.each(function(){var t=B(this),e=t.attr("class").split(" ").filter(function(t){return t.length&&"exists"!==t}).join(wlfmc_l10n.fragments_index_glue);o[e]=t.data("fragment-options")}),o):null}function j(o,a,i){clearTimeout(t),t=setTimeout(function(){n&&n.abort();var t=U(o=B.extend({firstLoad:!0},o)),e=new FormData;e.append("action",wlfmc_l10n.actions.load_fragments),e.append("nonce",wlfmc_l10n.ajax_nonce.load_fragments_nonce),e.append("context","frontend"),t&&(t=JSON.stringify(t),t=new File([t],"fragment.json"),e.append("fragments_file",t)),n=B.ajax({url:wlfmc_l10n.ajax_url,data:e,type:"POST",contentType:!1,processData:!1,beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce)},success:function(t){void 0!==t.fragments&&("function"==typeof a&&a.apply(null,i),C(t.fragments),w()),void 0!==t.products&&I(JSON.stringify(t.products)),void 0!==t.waitlist&&W(JSON.stringify(t.waitlist)),void 0!==t.lang&&(t=t.lang,q&&(localStorage.setItem(P,t),sessionStorage.setItem(P,t)))}})},100)}function C(t){B.each(t,function(t,e){var t="."+t.split(wlfmc_l10n.fragments_index_glue).filter(function(t){return t.length&&"exists"!==t&&"with-count"!==t}).join("."),o=B(t),a=B(e).filter(t);a.length||(a=B(e).find(t)),o.length&&a.length&&o.replaceWith(a)})}function S(t){return!0===t||"yes"===t||"1"===t||1===t||"true"===t}function Q(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())}function f(t){var e;null!==t&&(m=[],(e=B(".wlfmc-products-counter-wrapper .wlfmc-counter-item")).length&&m.length&&e.each(function(){var e=B(this).attr("data-row-id");B.grep(m,function(t){return t.product_id===e}).length||B(".wlfmc-products-counter-wrapper").find('[data-row-id="'+e+'"]').remove()}),(e=B(".wlfmc-wishlist-form .wlfmc-table-item")).length&&m.length&&e.each(function(){var e=B(this).attr("data-row-id");B.grep(m,function(t){return t.product_id===e}).length||B(".wlfmc-wishlist-form").find('[data-row-id="'+e+'"]').remove()}),B(".wlfmc-add-to-wishlist").removeClass("exists"),B.each(t,function(t,e){B(".wlfmc-add-to-wishlist-"+e.product_id).each(function(){B(this).addClass("exists"),B(this).find(".wlfmc_delete_item").attr("data-item-id",e.item_id),B(this).find(".wlfmc_delete_item").attr("data-wishlist-id",e.wishlist_id)}),B(".wlfmc-products-counter-wrapper  .products-counter-number").text(e.length),B(".wlfmc-products-counter-wishlist .total-products .wlfmc-total-count").text(e.length),m.push(e)}))}function D(t){var e;null!==t&&(p=[],(e=B(".wlfmc-waitlist-counter-wrapper .wlfmc-counter-item")).length&&p.length&&e.each(function(){var e=B(this).attr("data-row-id");B.grep(p,function(t){return t.product_id===e}).length||B(".wlfmc-waitlist-counter-wrapper").find('[data-row-id="'+e+'"]').remove()}),(e=B(".wlfmc-waitlist-table .wlfmc-table-item")).length&&p.length&&e.each(function(){var e=B(this).attr("data-row-id");B.grep(p,function(t){return t.product_id===e}).length||B(".wlfmc-waitlist-table").find('[data-row-id="'+e+'"]').remove()}),B(".wlfmc-add-to-outofstock").removeClass("exists"),B(".wlfmc-add-to-waitlist").removeClass("exists"),B.each(t,function(t,e){B(".wlfmc-add-to-waitlist-"+e.product_id).each(function(){var t=B("#"+B(this).data("popup-id"));(S(e.price_change)||S(e.on_sale)||S(e.low_stock)||S(e.back_in_stock)&&0<t.find('input[name="list_back-in-stock"]').length)&&B(this).addClass("exists"),S(e.back_in_stock)?t.find('input[name="list_back-in-stock"]').prop("checked",!0):t.find('input[name="list_back-in-stock"]').prop("checked",!1),S(e.price_change)?t.find('input[name="list_price-change"]').prop("checked",!0):t.find('input[name="list_price-change"]').prop("checked",!1),S(e.on_sale)?t.find('input[name="list_on-sale"]').prop("checked",!0):t.find('input[name="list_on-sale"]').prop("checked",!1),S(e.low_stock)?t.find('input[name="list_low-stock"]').prop("checked",!0):t.find('input[name="list_low-stock"]').prop("checked",!1)}),B(".wlfmc-add-to-outofstock-"+e.product_id).each(function(){S(e.back_in_stock)&&B(this).addClass("exists")}),B(".wlfmc-waitlist-counter-wrapper  .products-counter-number").text(e.length),B(".wlfmc-products-counter-waitlist .total-products .wlfmc-total-count").text(e.length),p.push(e)}))}toastr.options={tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,closeButton:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:2e4,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"default"===wlfmc_l10n.toast_position?wlfmc_l10n.is_rtl?"toast-top-right":"toast-top-left":wlfmc_l10n.toast_position,timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",newestOnTop:!0,preventDuplicates:!1,progressBar:!0,progressClass:"toast-progress",rtl:!!wlfmc_l10n.is_rtl},wlfmc_l10n.is_save_for_later_enabled&&wlfmc_l10n.is_save_for_later_popup_remove_enabled&&(B(".woocommerce-cart-form .product-remove a.remove").off("click").unbind("click").data("events",null),B("body").on("click","form.woocommerce-cart-form a.remove",function(t){t.stopImmediatePropagation(),t.preventDefault();var t=B(this),t=(r=t.attr("href"),B("#add_to_save_for_later_popup")),e={absolute:!1,color:"#333",transition:"all 0.3s",horizontal:t.data("horizontal"),vertical:t.data("vertical")};return t.popup(e),t.popup("show"),!1})),B(document).on("wlfmc_init",function(){L();var o,t=B(this),f="undefined"!=typeof wc_add_to_cart_params&&null!==wc_add_to_cart_params?wc_add_to_cart_params.cart_redirect_after_add:"";function e(t,e){void 0!==t.classList&&t.classList.contains("wlfmc-overlay")&&(t="remove"===e?"removeClass":"addClass",B("body")[t]("wlfmc-with-popup"))}function a(t){e(t,"add")}function i(t){e(t,"remove")}t.on("click",'.wlfmc-list button[name="apply_bulk_actions"]',function(t){var e=B(this).closest(".action-wrapper").find('select[name="bulk_actions"]'),o=B(this).closest("form").find("input.qty");0<e.length&&"delete"===e.val()&&0<o.length&&o.attr("disabled",!0)}),t.on("click",".wlfmc-list .remove-all-from-save-for-later-btn",function(t){var e=B(this).closest("form").find("input.qty");0<e.length&&e.attr("disabled",!0)}),t.on("click","body.elementor-editor-active .wlfmc-lists-header a,body.elementor-editor-active a.wlfmc-open-list-link",function(t){var o=B(this).attr("href");if(o&&"#"!==o&&"#!"!==o)return y(B(".wlfmc-tab-content")),t.preventDefault(),B.ajax({url:o,type:"GET",dataType:"html",success:function(t){var t=B(t),e=t.find(".wlfmc-lists-header"),t=t.find(".wlfmc-tab-content");t&&B(".wlfmc-tab-content").replaceWith(t),e&&B(".wlfmc-lists-header").replaceWith(e),o!==window.location.href&&window.history.pushState({path:o},"",o)}}),!1}),t.on("click",".wlfmc_add_to_save_for_later",function(t){t.preventDefault();t=B(this);return F(t.attr("data-cart_item_key"),t),!1}),t.on("click",".wlfmc_remove_from_save_for_later",function(t){t.preventDefault();var e=B(this),o=e.parents("[data-item-id]"),t=o.data("item-id"),t={action:wlfmc_l10n.actions.remove_from_save_for_later_action,nonce:wlfmc_l10n.ajax_nonce.remove_from_save_for_later_nonce,context:"frontend",remove_from_save_for_later:t};return B.ajax({url:wlfmc_l10n.save_for_later_ajax_url,data:t,method:"post",beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),v(e)},complete:function(){b(e)},success:function(t){t&&(j(),"undefined"!==t.count&&B(".wlfmc-tabs-wrapper").attr("data-count",t.count),"true"===t.result&&""!==B.trim(wlfmc_l10n.labels.sfl_product_removed_text)&&toastr.error(wlfmc_l10n.labels.sfl_product_removed_text),"undefined"!==t.count&&0===t.count&&B(".wlfmc-save-for-later-table-wrapper").empty(),w(),B("body").trigger("wlfmc_removed_from_save_for_later",[e,o,t]))}}),!1}),t.on("click",".wlfmc_save_for_later_ajax_add_to_cart",function(t){var e=B(this),o=e.attr("data-item_id"),o={action:wlfmc_l10n.actions.save_for_later_add_to_cart_action,nonce:wlfmc_l10n.ajax_nonce.add_to_cart_from_sfl_nonce,context:"frontend",item_id:o};return t.preventDefault(),e.removeClass("added"),e.addClass("loading"),!1===B(document.body).triggerHandler("should_send_ajax_request.adding_to_cart",[e])?(B(document.body).trigger("ajax_request_not_sent.adding_to_cart",[!1,!1,e]),!0):(B(document.body).trigger("adding_to_cart",[e,{}]),B.ajax({url:wlfmc_l10n.save_for_later_ajax_url,data:o,method:"post",beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce)},success:function(t){t&&(void 0!==t.fragments&&C(t.fragments),t.error?toastr.error(t.error):B("form.woocommerce-cart-form").length?(void 0!==t.fragments&&"undefined"!==t.fragments.wlfmc_save_for_later_count&&B(".wlfmc-tabs-wrapper").attr("data-count",t.fragments.wlfmc_save_for_later_count),B(document.body).trigger("wc_fragment_refresh"),B(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,e])):location.reload())}}),!1)}),t.on("click","#add_to_save_for_later_popup #add_item",function(t){return t.preventDefault(),B("#add_to_save_for_later_popup").popup("hide"),F(function(t,e){var o,a,i=decodeURIComponent(t.substring(1)).split(/[&|?]+/);for(a=0;a<i.length;a++)if((o=i[a].split("="))[0]===e)return void 0===o[1]||o[1]}(r,"remove_item"),B('a[href="'+r+'"]').closest("tr")),!1}),t.on("click","#add_to_save_for_later_popup #remove_item",function(t){return t.preventDefault(),B("#add_to_save_for_later_popup").popup("hide"),window.location.href=r,!1}),t.on("click",".wlfmc-sfl-btn-login-need",function(t){return t.preventDefault(),toastr.error(wlfmc_l10n.labels.sfl_login_need),!1}),t.on("click",".wlfmc-waitlist-btn-login-need",function(t){return t.preventDefault(),toastr.error(wlfmc_l10n.labels.waitlist_login_need),!1}),t.on("wlfmc_show_variation",function(t,e){M(e,e.product_id,e.variation_id)}),t.on("reset_data",function(t){t=B(t.target).data("product_id");M(null,t,t),S(wlfmc_l10n.waitlist_required_product_variation)&&B(".wlfmc-add-to-waitlist-"+t).find(".wlfmc-popup-trigger").addClass("wlfmc-disabled")}),t.on("hide_variation",".variations_form",function(t){var e=B(".wlfmc-add-to-waitlist-"+B(this).data("product_id"));0<e.length&&S(wlfmc_l10n.waitlist_required_product_variation)&&(t.preventDefault(),e.find(".wlfmc-popup-trigger").addClass("wlfmc-disabled"))}),t.on("show_variation",".variations_form",function(t,e,o){var a=B(".wlfmc-add-to-waitlist-"+B(this).data("product_id"));0<a.length&&(t.preventDefault(),a.find(".wlfmc-popup-trigger").removeClass("wlfmc-disabled"))}),t.on("click",".wlfmc-add-to-waitlist .wlfmc-popup-trigger.wlfmc-disabled",function(t){return t.preventDefault(),toastr.error(wlfmc_l10n.labels.waitlist_make_a_selection_text),!1}),t.on("click",".wlfmc_add_to_waitlist",function(t){var e=B(this),i=e.attr("data-product-id"),o=e.attr("data-parent-product-id"),n=e.closest(".wlfmc-popup"),r=0<n.find(".wlfmc-waitlist-select-type input[name=list_on-sale]:checked").length?1:0,l=0<n.find(".wlfmc-waitlist-select-type input[name=list_back-in-stock]:checked").length?1:0,c=0<n.find(".wlfmc-waitlist-select-type input[name=list_price-change]:checked").length?1:0,s=0<n.find(".wlfmc-waitlist-select-type input[name=list_low-stock]:checked").length?1:0,a=0<n.find("input[name=wlfmc_email]").length&&n.find("input[name=wlfmc_email]").val().trim(),d={action:wlfmc_l10n.actions.add_product_to_waitlist_action,nonce:wlfmc_l10n.ajax_nonce.add_product_to_waitlist_nonce,context:"frontend",add_to_waitlist:i,product_type:e.attr("data-product-type"),on_sale:r,back_in_stock:l,price_change:c,low_stock:s,wlfmc_email:a};if(!1!==a&&""===a)toastr.error(wlfmc_l10n.labels.waitlist_email_required);else if(!1===a||Q(a)){null===B(document).triggerHandler("wlfmc_add_to_waitlist_data",[e,d])&&(d=null),B('form.cart[method=post][data-product_id="'+o+'"], form.vtajaxform[method=post][data-product_id="'+o+'"]').length?f=B('form.cart[method=post][data-product_id="'+o+'"], form.vtajaxform[method=post][data-product_id="'+o+'"]').eq(0):B(this).closest("form.cart[method=post], form.vtajaxform[method=post]").length?f=B(this).closest("form.cart[method=post], form.vtajaxform[method=post]").eq(0):B("#product-"+o+" form.cart[method=post],#product-"+o+" form.vtajaxform[method=post]").length?f=B("#product-"+o+" form.cart[method=post],#product-"+o+" form.vtajaxform[method=post]").eq(0):B('form.cart[method=post] button[name="add-to-cart"][value="'+o+'"],form.vtajaxform[method=post] button[name="add-to-cart"][value="'+o+'"]').length&&(f=B('form.cart[method=post] button[name="add-to-cart"][value="'+o+'"],form.vtajaxform[method=post] button[name="add-to-cart"][value="'+o+'"]').closest("form").eq(0));var f,m=new FormData;if(void 0!==f&&0<f.length&&(m=new FormData(f.get(0))).delete("add-to-cart"),B.each(d,function(t,e){m.append(t,"object"===_typeof2(e)?JSON.stringify(e):e)}),t.preventDefault(),jQuery(document.body).trigger("wlfmc_adding_to_waitlist"),x())return B.ajax({url:wlfmc_l10n.waitlist_ajax_url,data:m,type:"POST",contentType:!1,processData:!1,cache:!1,beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),v(e)},complete:function(){b(e)},success:function(t){var e,o=t.result,a=t.message;"true"===o&&(j(),n.popup("hide"),""!==B.trim(a)&&toastr.success(a),e="waitlist",1==r&&(e+=",on-sale"),1==c&&(e+=",price-change"),1==l&&(e+=",back-in-stock"),1==s&&(e+=",low-stock"),g(i,t.wishlist_id,t.customer_id,e)),""!==B.trim(t.message)&&"true"!==o&&toastr.error(a)}}),!1;window.alert(wlfmc_l10n.labels.cookie_disabled)}else toastr.error(wlfmc_l10n.labels.waitlist_email_format)}),t.on("click",".wlfmc_add_to_outofstock",function(t){var e=B(this),a=e.attr("data-product-id"),o=e.attr("data-parent-product-id"),i=e.closest(".wlfmc-add-to-outofstock").find("input[name=wlfmc_email]"),i=0<i.length&&i.val().trim(),n={action:wlfmc_l10n.actions.add_product_to_waitlist_action,nonce:wlfmc_l10n.ajax_nonce.add_product_to_waitlist_nonce,context:"frontend",add_to_waitlist:a,product_type:e.attr("data-product-type"),on_sale:0,back_in_stock:1,price_change:0,low_stock:0,wlfmc_email:i};if(!1!==i&&""===i)toastr.error(wlfmc_l10n.labels.waitlist_email_required);else if(!1===i||Q(i)){null===B(document).triggerHandler("wlfmc_add_to_waitlist_data",[e,n])&&(n=null),B('form.cart[method=post][data-product_id="'+o+'"], form.vtajaxform[method=post][data-product_id="'+o+'"]').length?r=B('form.cart[method=post][data-product_id="'+o+'"], form.vtajaxform[method=post][data-product_id="'+o+'"]').eq(0):B(this).closest("form.cart[method=post], form.vtajaxform[method=post]").length?r=B(this).closest("form.cart[method=post], form.vtajaxform[method=post]").eq(0):B("#product-"+o+" form.cart[method=post],#product-"+o+" form.vtajaxform[method=post]").length?r=B("#product-"+o+" form.cart[method=post],#product-"+o+" form.vtajaxform[method=post]").eq(0):B('form.cart[method=post] button[name="add-to-cart"][value="'+o+'"],form.vtajaxform[method=post] button[name="add-to-cart"][value="'+o+'"]').length&&(r=B('form.cart[method=post] button[name="add-to-cart"][value="'+o+'"],form.vtajaxform[method=post] button[name="add-to-cart"][value="'+o+'"]').closest("form").eq(0));var r,l=new FormData;if(void 0!==r&&0<r.length&&(l=new FormData(r.get(0))).delete("add-to-cart"),B.each(n,function(t,e){l.append(t,"object"===_typeof2(e)?JSON.stringify(e):e)}),t.preventDefault(),jQuery(document.body).trigger("wlfmc_adding_to_waitlist"),x())return B.ajax({url:wlfmc_l10n.waitlist_ajax_url,data:l,type:"POST",contentType:!1,processData:!1,cache:!1,beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),v(e)},complete:function(){b(e)},success:function(t){var e=t.result,o=t.message;"true"===e&&(j(),""!==B.trim(o)&&toastr.success(o),B(".wlfmc-add-to-outofstock-"+a).addClass("exists"),g(a,t.wishlist_id,t.customer_id,"back-in-stock")),""!==B.trim(t.message)&&"true"!==e&&toastr.error(o)}}),!1;window.alert(wlfmc_l10n.labels.cookie_disabled)}else toastr.error(wlfmc_l10n.labels.waitlist_email_format)}),t.on("click",".wlfmc_cancel_outofstock",function(t){var e=B(this),a=e.attr("data-product-id"),o=(e.attr("data-parent-product-id"),{action:wlfmc_l10n.actions.add_product_to_waitlist_action,nonce:wlfmc_l10n.ajax_nonce.add_product_to_waitlist_nonce,context:"frontend",add_to_waitlist:a,product_type:e.attr("data-product-type"),on_sale:0,back_in_stock:0,price_change:0,low_stock:0});if(t.preventDefault(),x())return B.ajax({url:wlfmc_l10n.waitlist_ajax_url,data:o,type:"POST",beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),v(e)},complete:function(){b(e)},success:function(t){var e=t.result,o=t.message;"true"===e&&(""!==B.trim(o)&&toastr.success(o),B(".wlfmc-add-to-outofstock-"+a).removeClass("exists"),j()),""!==B.trim(t.message)&&"true"!==e&&toastr.error(o)}}),!1;window.alert(wlfmc_l10n.labels.cookie_disabled)}),t.on("input",".wlfmc-popup-lists-wrapper .search-input",function(){var t=B(this).val().toLowerCase(),e=B(this).closest(".wlfmc-popup-lists-wrapper").find(".list"),o=B(this).closest(".wlfmc-popup-lists-wrapper").find(".no-results-row"),a=0;e.find(".list-item").length?(e.find(".list-item").each(function(){-1<B(this).text().toLowerCase().indexOf(t)?(B(this).show(),a++):B(this).hide()}),0===a?o.show():o.hide()):B(this).val("")}),t.on("click",".wlfmc-create-new-list",function(){var t=B("#"+B(this).attr("data-parent-popup-id")),e=B("#"+B(this).attr("data-child-popup-id")),o=(t.popup("hide"),{absolute:!1,color:"#333",transition:"all 0.1s",horizontal:e.data("horizontal"),vertical:e.data("vertical")});e.popup(_objectSpread(_objectSpread({},o),{},{onclose:function(){t.popup("show"),e.popup(_objectSpread(_objectSpread({},o),{},{onclose:null}))}})),e.popup("show")}),t.on("click",".wlfmc-toggle-privacy",function(t){t.preventDefault();var e=B(this),t=e.parents("[data-wishlist-id]"),o=parseInt(e.attr("data-privacy")),a=0===o?1:0,i=t.attr("data-wishlist-id"),n=e.find("i"),r=B("#edit_popup_"+i);return B.ajax({url:wlfmc_l10n.multi_list_ajax_url,data:{action:wlfmc_l10n.actions.change_privacy_action,nonce:wlfmc_l10n.ajax_nonce.change_privacy_nonce,context:"frontend",wishlist_id:i,list_privacy:a},method:"post",beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),v(e)},complete:function(){b(e)},success:function(t){t&&(n.removeClass("wlfmc-icon-unlock wlfmc-icon-lock"),n.addClass(0===o?"wlfmc-icon-lock":"wlfmc-icon-unlock"),r.find('input[name="list_privacy"][value="'+a+'"]').prop("checked","checked"),e.attr("data-privacy",a),0==a?B('.wlfmc-popup-trigger[data-popup-id="share_popup_'+i+'"]').removeAttr("style"):B('.wlfmc-popup-trigger[data-popup-id="share_popup_'+i+'"]').css("display","none"))}}),!1}),t.on("click",".wlfmc-delete-list",function(t){t.preventDefault();var e=B(this),t=e.data("wishlist-id"),o=B("#"+e.data("popup-id")),a=B('ul.wlfmc-manage-lists li[data-wishlist-id="'+t+'"],a.list-row[data-list-id="'+t+'"]');return B.ajax({url:wlfmc_l10n.multi_list_ajax_url,data:{action:wlfmc_l10n.actions.delete_list_action,nonce:wlfmc_l10n.ajax_nonce.delete_list_nonce,context:"frontend",wishlist_id:t},method:"POST",cache:!1,beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),v(e)},complete:function(){b(e)},success:function(t){t&&(t.result?(o.popup("hide"),a.remove()):toastr.error(t.message),j())}}),!1}),t.on("click",".wlfmc-save-list",function(t){t.preventDefault();var e=B(this),o=e.data("wishlist-id"),a=B('ul.wlfmc-manage-lists li[data-wishlist-id="'+o+'"],a.list-row[data-list-id="'+o+'"], .wlfmc-wishlist-table-header'),i=B("#"+e.data("popup-id")),n=parseInt(i.find('input[name="list_privacy"]:checked').val()),r=i.find('input[name="list_name"]').val(),l=i.find('textarea[name="list_descriptions"]').val(),c=a.find(".wlfmc-toggle-privacy i");return B.ajax({url:wlfmc_l10n.multi_list_ajax_url,data:{action:wlfmc_l10n.actions.update_list_action,nonce:wlfmc_l10n.ajax_nonce.update_list_nonce,context:"frontend",wishlist_id:o,list_privacy:n,list_name:r,list_descriptions:l},method:"POST",cache:!1,beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),v(e)},complete:function(){b(e)},success:function(t){t&&(t.result?(i.popup("hide"),a.find(".list-name").text(r),a.find(".list-desc").text(l),a.find(".wlfmc-toggle-privacy").attr("data-privacy",n),c.removeClass("wlfmc-icon-unlock wlfmc-icon-lock"),c.addClass(0===n?"wlfmc-icon-unlock":"wlfmc-icon-lock"),0===n?B('.wlfmc-popup-trigger[data-popup-id="share_popup_'+o+'"]').removeAttr("style"):B('.wlfmc-popup-trigger[data-popup-id="share_popup_'+o+'"]').css("display","none")):toastr.error(t.message))}}),!1}),t.on("click",".wlfmc-add-list",function(t){t.preventDefault();var e=B(this),o=B("#new_list_popup"),t=parseInt(o.find('input[name="list_privacy"]:checked').val()),a=o.find('input[name="list_name"]').val(),i=o.find('textarea[name="list_descriptions"]').val();return""===B.trim(a)?toastr.error(wlfmc_l10n.labels.multi_list_list_name_required):B.ajax({url:wlfmc_l10n.multi_list_ajax_url,data:{action:wlfmc_l10n.actions.create_new_list_action,nonce:wlfmc_l10n.ajax_nonce.create_new_list_nonce,context:"frontend",list_privacy:t,list_name:a,list_descriptions:i,fragments:U("list_counter")},method:"POST",cache:!1,beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),v(e)},complete:function(){b(e)},success:function(t){var e;t&&(t.result?(o.find("form")[0].reset(),o.popup("hide"),e=wp.template("wlfmc-list-item")(t),(0<B("#move_popup").length?(B("#move_popup ul.list").append(e),B("#move_popup ul.list").find('input.list-item-checkbox[value="'+t.wishlist_id+'"]').prop("checked","checked").trigger("change"),B("#move_popup .list-empty").hide(),B("#move_popup .no-results-row").hide(),B("#move_popup .wlfmc-search-lists").attr("style",""),B("#move_popup .wlfmc_move_to_list")):0<B("#copy_popup").length?(B("#copy_popup ul.list").append(e),B("#copy_popup ul.list").find('input.list-item-checkbox[value="'+t.wishlist_id+'"]').prop("checked","checked").trigger("change"),B("#copy_popup .list-empty").hide(),B("#copy_popup .no-results-row").hide(),B("#copy_popup .wlfmc-search-lists").attr("style",""),B("#copy_popup .wlfmc_copy_to_list")):(B("#add_to_list_popup ul.list").append(e),B("#add_to_list_popup ul.list").find('input.list-item-checkbox[value="'+t.wishlist_id+'"]').prop("checked","checked").trigger("change"),B("#add_to_list_popup .list-empty").hide(),B("#add_to_list_popup .no-results-row").hide(),B("#add_to_list_popup .wlfmc-search-lists").attr("style",""),B("#add_to_list_popup .wlfmc_add_to_multi_list").attr("style",""),B("#add_to_list_popup .wlfmc-manage-btn"))).attr("style",""),h(),0<B(".wlfmc-lists").length?(y(B(".wlfmc-lists")),j()):void 0!==t.fragments&&C(t.fragments)):toastr.error(t.message))}}),!1}),t.on("wlfmc_show_variation",function(t,e){B(t.target);var o=e.product_id,a=e.variation_id,t=B('.wlfmc-add-to-multi-list [data-parent-product-id="'+o+'"]'),i=t.closest(".wlfmc-add-to-multi-list").data("enable-outofstock");o&&a&&t.length&&(i||e.is_in_stock?t.closest(".wlfmc-add-to-multi-list").removeClass("hide"):t.closest(".wlfmc-add-to-multi-list").addClass("hide"),t.each(function(){var t=B(this);t.attr("data-parent-product-id",o),t.attr("data-product-id",a)}),B('.wlfmc-popup-trigger[data-popup-id="add_to_list_popup"][data-parent-product-id="'+o+'"]').attr("data-product-id",a))}),t.on("reset_data",function(t){var e=B(t.target).data("product_id"),t=B('.wlfmc-add-to-multi-list [data-parent-product-id="'+e+'"]');e&&t.length&&(t.closest(".wlfmc-add-to-multi-list").removeClass("hide"),t.each(function(){var t=B(this);t.attr("data-parent-product-id",e),t.attr("data-product-id",e)}),B('.wlfmc-popup-trigger[data-popup-id="add_to_list_popup"][data-parent-product-id="'+e+'"]').attr("data-product-id",e))}),t.on("click",'.wlfmc-popup-trigger[data-popup-id="move_popup"]',function(t){var e=B(this),o=B("#move_popup"),e=e.data("item-id");return o.find(".wlfmc_move_to_list").attr("data-item-ids",e),!1}),t.on("click",'.wlfmc-popup-trigger[data-popup-id="copy_popup"]',function(t){var e=B(this),o=B("#copy_popup"),e=e.data("item-id");return o.find(".wlfmc_copy_to_list").attr("data-item-ids",e),!1}),t.on("click",'.wlfmc-popup-trigger[data-popup-id="add_to_list_popup"]',function(t){var e=B(this),o=e.attr("data-product-id"),a=e.attr("data-parent-product-id"),e=e.attr("data-product-type"),c=B("#add_to_list_popup"),i={action:wlfmc_l10n.actions.load_lists_action,nonce:wlfmc_l10n.ajax_nonce.load_lists_nonce,context:"frontend",product_id:o};if(c.find(".wlfmc_add_to_multi_list").attr("data-product-type",e).attr("data-product-id",o).attr("data-parent-product-id",a),x())return B.ajax({url:wlfmc_l10n.multi_list_ajax_url,data:i,type:"POST",beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),y(c.find(".wlfmc-add-to-list-container"))},complete:function(){k(c.find(".wlfmc-add-to-list-container"))},success:function(t){var e=t.result,o=t.message,a=t.data,i=t.product_lists;if("true"===e&&0<a.length){for(var n=wp.template("wlfmc-list-item"),r="",l=0;l<a.length;l++)r+=n(a[l]);c.find(".wlfmc-search-lists").show(),c.find(".list").html(r),c.find(".wlfmc-number").text(i.length),c.find(".list-empty").hide(),c.find(".wlfmc_add_to_multi_list").attr("data-list-ids",JSON.stringify(i)).attr("style",""),c.find(".wlfmc-manage-btn").attr("style","")}else c.find(".wlfmc-manage-btn").css("display","none !important"),c.find(".wlfmc-search-lists").hide(),c.find(".list").html(""),c.find(".list-empty").show(),c.find(".wlfmc-number").text(0),c.find(".wlfmc_add_to_multi_list").css("display","none !important");""!==B.trim(t.message)&&"true"!==e&&(toastr.error(o),c.popup("hide"))}}),!1;t.preventDefault(),window.alert(wlfmc_l10n.labels.cookie_disabled)}),t.on("click",".wlfmc_add_to_multi_list",function(t){var e,o=B(this),a=o.attr("data-product-id"),i=o.attr("data-parent-product-id"),n=B("#add_to_list_popup"),r=JSON.parse(o.attr("data-list-ids")),l=n.find("input.list-item-checkbox:checked").map(function(){return this.value}).get(),r={action:wlfmc_l10n.actions.add_product_to_list_action,nonce:wlfmc_l10n.ajax_nonce.add_product_to_list_nonce,context:"frontend",add_to_list:a,product_type:o.attr("data-product-type"),current_lists:r,wishlist_ids:l},c=(null===B(document).triggerHandler("wlfmc_add_to_multi_list_data",[o,r])&&(r=null),B('form.cart[method=post][data-product_id="'+i+'"], form.vtajaxform[method=post][data-product_id="'+i+'"]').length?e=B('form.cart[method=post][data-product_id="'+i+'"], form.vtajaxform[method=post][data-product_id="'+i+'"]').eq(0):B(this).closest("form.cart[method=post], form.vtajaxform[method=post]").length?e=B(this).closest("form.cart[method=post], form.vtajaxform[method=post]").eq(0):B("#product-"+i+" form.cart[method=post],#product-"+i+" form.vtajaxform[method=post]").length?e=B("#product-"+i+" form.cart[method=post],#product-"+i+" form.vtajaxform[method=post]").eq(0):B('form.cart[method=post] button[name="add-to-cart"][value="'+i+'"],form.vtajaxform[method=post] button[name="add-to-cart"][value="'+i+'"]').length&&(e=B('form.cart[method=post] button[name="add-to-cart"][value="'+i+'"],form.vtajaxform[method=post] button[name="add-to-cart"][value="'+i+'"]').closest("form").eq(0)),new FormData);if(void 0!==e&&0<e.length?(c=new FormData(e.get(0))).delete("add-to-cart"):(l=o.closest(".product.post-"+i).find(".add_to_cart_button")).length&&(r.quantity=l.attr("data-quantity")),B.each(r,function(t,e){c.append(t,"object"===_typeof2(e)?JSON.stringify(e):e)}),t.preventDefault(),jQuery(document.body).trigger("wlfmc_adding_to_multi_list"),x())return B.ajax({url:wlfmc_l10n.multi_list_ajax_url,data:c,type:"POST",contentType:!1,processData:!1,cache:!1,beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),v(o)},complete:function(){b(o)},success:function(t){var e=t.result,o=t.message;"true"===e&&(j(),n.popup("hide"),""!==B.trim(wlfmc_l10n.labels.multi_list_saved_text)&&toastr.success(wlfmc_l10n.labels.multi_list_saved_text),t.last_list_id&&"false"!==t.last_list_id&&g(a,t.last_list_id,t.customer_id,"lists")),""!==B.trim(t.message)&&"true"!==e&&toastr.error(o)}}),!1;window.alert(wlfmc_l10n.labels.cookie_disabled)}),t.on("click",".wlfmc_move_to_list",function(t){var o=B(this),e=o.attr("data-item-ids"),a=B("#move_popup"),i=o.attr("data-wishlist-id"),n=a.find("input.list-item-checkbox:checked").val(),e={action:wlfmc_l10n.actions.move_to_another_list,nonce:wlfmc_l10n.ajax_nonce.move_to_another_list_nonce,context:"frontend",item_ids:e,current_list:i,destination_wishlist_id:n};if(""!==e.current_list&&""!==e.destination_wishlist_id&&""!==e.item_ids)return null===B(document).triggerHandler("wlfmc_move_to_list_data",[o,e])&&(e=null),t.preventDefault(),B.ajax({url:wlfmc_l10n.admin_url,data:e,dataType:"json",method:"post",beforeSend:function(t){v(o)},success:function(t){var e=t.result,t=wlfmc_l10n.labels.multi_list_successfully_move_message.replace("{wishlist_name}",t.wishlist_name);S(e)&&j("",function(t,e){B("#move_popup_background").remove(),B("#move_popup_wrapper").remove(),t&&""!==B.trim(e)&&toastr.success(e)},[!0,t]),S(e)||(a.popup("hide"),b(o))}}),!1}),t.on("click",".wlfmc_copy_to_list",function(t){var o=B(this),e=o.attr("data-item-ids"),a=B("#copy_popup"),i=o.attr("data-wishlist-id"),n=a.find("input.list-item-checkbox:checked").val(),e={action:wlfmc_l10n.actions.copy_to_another_list,nonce:wlfmc_l10n.ajax_nonce.copy_to_another_list_nonce,context:"frontend",item_ids:e,current_list:i,wishlist:n};if(""!==e.current_list&&""!==e.destination_wishlist_id&&""!==e.item_ids)return null===B(document).triggerHandler("wlfmc_copy_to_list_data",[o,e])&&(e=null),t.preventDefault(),B.ajax({url:wlfmc_l10n.admin_url,data:e,dataType:"json",method:"post",beforeSend:function(t){v(o)},success:function(t){var e=t.result,t=wlfmc_l10n.labels.successfully_copy_message.replace("{wishlist_name}",t.wishlist_name);S(e)&&j("",function(t,e){B("#copy_popup_background").remove(),B("#copy_popup_wrapper").remove(),t&&""!==B.trim(e)&&toastr.success(e)},[!0,t]),S(e)||(a.popup("hide"),b(o))}}),!1}),t.on("click",".wlfmc_copy_to_default_list",function(t){var o=B(this),e=o.attr("data-item-id"),a=o.attr("data-wishlist-id"),e={action:wlfmc_l10n.actions.copy_to_another_list,nonce:wlfmc_l10n.ajax_nonce.copy_to_another_list_nonce,context:"frontend",item_ids:e,wishlist:"default",current_list:a};if(""!==e.current_list&&""!==e.item_ids)return null===B(document).triggerHandler("wlfmc_copy_to_default_list_data",[o,e])&&(e=null),t.preventDefault(),B.ajax({url:wlfmc_l10n.admin_url,data:e,dataType:"json",method:"post",beforeSend:function(t){v(o)},success:function(t){var e=t.result,t=wlfmc_l10n.labels.successfully_copy_message.replace("{wishlist_name}",t.wishlist_name);S(e)&&(j("list_counter"),""!==B.trim(t)&&toastr.success(t)),S(e)||b(o)}}),!1}),t.on("click",".wlfmc-multi-list-btn-login-need",function(t){return t.preventDefault(),toastr.error(wlfmc_l10n.labels.multi_list_login_need),!1}),t.on("click",".wlfmc_add_to_wishlist",function(t){if(t.preventDefault(),s&&Array.isArray(m)&&!m.length)toastr.error(wlfmc_l10n.labels.product_adding);else{var e,r=B(this),l=r.attr("data-product-id"),t=r.attr("data-parent-product-id"),c=r.closest(".wlfmc-add-to-wishlist-"+l),o={action:wlfmc_l10n.actions.add_to_wishlist_action,nonce:wlfmc_l10n.ajax_nonce.add_to_wishlist_nonce,context:"frontend",add_to_wishlist:l,product_type:r.attr("data-product-type")},a=(null===B(document).triggerHandler("wlfmc_add_to_wishlist_data",[r,o])&&(o=null),B('form.cart[method=post][data-product_id="'+t+'"], form.vtajaxform[method=post][data-product_id="'+t+'"]').length?e=B('form.cart[method=post][data-product_id="'+t+'"], form.vtajaxform[method=post][data-product_id="'+t+'"]').eq(0):B(this).closest("form.cart[method=post], form.vtajaxform[method=post]").length?e=B(this).closest("form.cart[method=post], form.vtajaxform[method=post]").eq(0):B("#product-"+t+" form.cart[method=post],#product-"+t+" form.vtajaxform[method=post]").length?e=B("#product-"+t+" form.cart[method=post],#product-"+t+" form.vtajaxform[method=post]").eq(0):B('form.cart[method=post] button[name="add-to-cart"][value="'+t+'"],form.vtajaxform[method=post] button[name="add-to-cart"][value="'+t+'"]').length&&(e=B('form.cart[method=post] button[name="add-to-cart"][value="'+t+'"],form.vtajaxform[method=post] button[name="add-to-cart"][value="'+t+'"]').closest("form").eq(0)),new FormData);if(void 0!==e&&0<e.length?(a=new FormData(e.get(0))).delete("add-to-cart"):(e=r.closest(".product.post-"+t).find(".add_to_cart_button")).length&&(o.quantity=e.attr("data-quantity")),B.each(o,function(t,e){a.append(t,"object"===_typeof2(e)?JSON.stringify(e):e)}),jQuery(document.body).trigger("wlfmc_adding_to_wishlist"),x())return B.ajax({url:wlfmc_l10n.ajax_url,data:a,type:"POST",contentType:!1,processData:!1,cache:!1,beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),s=!0,v(r)},complete:function(){s=!1,b(r)},success:function(t){var e,o,a=t.result,i=t.message,n=!0;"true"!==a&&"exists"!==a||(j(),t.item_id&&null!=m&&(m.push({wishlist_id:t.wishlist_id,item_id:t.item_id,product_id:parseInt(l)}),I(JSON.stringify(m))),(e=c.attr("data-popup-id"))&&(o={absolute:n=!1,color:"#333",transition:"all 0.3s",horizontal:(e=B("#"+e)).data("horizontal"),vertical:e.data("vertical")},e.popup(o),e.popup("show")),n&&""!==B.trim(wlfmc_l10n.labels.product_added_text)&&"true"===a&&toastr.success(wlfmc_l10n.labels.product_added_text),"true"===a&&g(l,t.wishlist_id,t.customer_id,"wishlist")),"true"===a&&"add-redirect"===wlfmc_l10n.click_behavior&&(window.location.href=t.wishlist_url),n&&""!==B.trim(t.message)&&"true"!==a&&toastr.error(i),w(),B("body").trigger("wlfmc_added_to_wishlist",[r,c])}}),!1;s=!1,window.alert(wlfmc_l10n.labels.cookie_disabled)}}),t.on("click",".wlfmc_ajax_add_to_cart:not(.disabled)",function(t){var e=B(this),o=e.attr("data-item_id"),a=e.attr("data-wishlist_id"),o={action:wlfmc_l10n.actions.add_to_cart_action,nonce:wlfmc_l10n.ajax_nonce.add_to_cart_nonce,context:"frontend",lid:o,wid:a};return t.preventDefault(),e.removeClass("added"),e.addClass("loading"),!1===B(document.body).triggerHandler("should_send_ajax_request.adding_to_cart",[e])?(B(document.body).trigger("ajax_request_not_sent.adding_to_cart",[!1,!1,e]),!0):(B(document.body).trigger("adding_to_cart",[e,o]),B.ajax({url:wlfmc_l10n.admin_url,data:o,type:"POST",dataType:"json",success:function(t){if(t){if(t.error){if(t.product_url)return void(window.location=t.product_url);""!==wlfmc_l10n.labels.failed_add_to_cart_message&&toastr.error(wlfmc_l10n.labels.failed_add_to_cart_message)}else{if(S(wc_add_to_cart_params.cart_redirect_after_add))return void(window.location=wc_add_to_cart_params.cart_url);B(document.body).trigger("wc_fragment_refresh"),B(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,e]),""!==wlfmc_l10n.labels.added_to_cart_message&&toastr.success(wlfmc_l10n.labels.added_to_cart_message)}t.message&&""!==t.message&&B(document.body).trigger("add_to_cart_message",[t.message,e])}}}),!1)}),t.on("click",".wlfmc-btn-login-need",function(t){return t.preventDefault(),toastr.error(wlfmc_l10n.labels.login_need),!1}),t.on("click",".wlfmc_already_in_wishlist",function(t){return t.preventDefault(),toastr.error(wlfmc_l10n.labels.already_in_wishlist_text),!1}),t.on("click",".wlfmc-wishlist-table .remove_from_wishlist",function(t){var i=B(this),t=(t.preventDefault(),i.parents(".wlfmc-wishlist-items-wrapper")),n=i.parents("[data-row-id]"),r=n.data("row-id"),l=t.data("id"),t=t.data("token"),t={action:wlfmc_l10n.actions.remove_from_wishlist_action,nonce:wlfmc_l10n.ajax_nonce.remove_from_wishlist_nonce,context:"frontend",remove_from_wishlist:r,wishlist_id:l,wishlist_token:t};return B.ajax({url:wlfmc_l10n.ajax_url,data:t,method:"post",beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),y(n)},complete:function(){k(n)},success:function(t){if(j(),S(t.result)){if(null!=m){for(var e=m.length,o=0;o<=e-1;o++)if(void 0!==m[o]&&m[o].wishlist_id==l&&m[o].product_id==r){m.splice(o,1),B("body").trigger("wlfmc_removed_from_wishlist",[i,n,t]);break}I(JSON.stringify(m))}if(null!=p){var a=p.length;for(o=0;o<=a-1;o++)if(void 0!==p[o]&&p[o].wishlist_id==l&&p[o].product_id==r){p.splice(o,1),B("body").trigger("wlfmc_removed_from_waitlist",[i,n,t]);break}W(JSON.stringify(p))}}w()}}),!1}),t.on("click touchend",".wlfmc-products-counter-wishlist .remove_from_wishlist,.wlfmc-products-counter-waitlist .remove_from_wishlist",function(t){var a=B(this),i=(t.preventDefault(),a.parents(".wlfmc-wishlist-items-wrapper")),n=a.parents("[data-row-id]"),r=n.data("row-id"),l=n.data("item-id"),c=i.data("id"),t=i.data("token"),t={action:wlfmc_l10n.actions.remove_from_wishlist_action,nonce:wlfmc_l10n.ajax_nonce.remove_from_wishlist_nonce,context:"frontend",remove_from_wishlist:r,wishlist_id:c,wishlist_token:t};return B.ajax({url:wlfmc_l10n.ajax_url,data:t,method:"post",beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),v(a)},complete:function(){b(a)},success:function(t){if(S(t.result)){if(null!=m){for(var e=m.length,o=0;o<=e-1;o++)if(void 0!==m[o]&&m[o].wishlist_id===c&&m[o].product_id===r){m.splice(o,1),B("body").trigger("wlfmc_removed_from_wishlist",[a,n,t]);break}I(JSON.stringify(m))}if(null!=p){for(e=p.length,o=0;o<=e-1;o++)if(void 0!==p[o]&&p[o].wishlist_id===c&&p[o].product_id===r){p.splice(o,1),B("body").trigger("wlfmc_removed_from_waitlist",[a,n,t]);break}W(JSON.stringify(p))}0<a.closest(".wlfmc-products-counter-wrapper").length&&(B(".wlfmc-products-counter-wrapper").find('[data-item-id="'+l+'"]').remove(),B(".wlfmc-wishlist-form").find('[data-item-id="'+l+'"]').remove(),B(".wlfmc-products-counter-wrapper  .products-counter-number").text(t.count),B(".wlfmc-products-counter-wishlist .total-products .wlfmc-total-count").text(t.count),B(".wlfmc-add-to-wishlist.wlfmc-add-to-wishlist-"+r).removeClass("exists")),0<a.closest(".wlfmc-waitlist-counter-wrapper").length&&(B(".wlfmc-waitlist-counter-wrapper").find('[data-item-id="'+l+'"]').remove(),B(".wlfmc-wishlist-form").find('[data-item-id="'+l+'"]').remove(),B(".wlfmc-waitlist-counter-wrapper  .products-counter-number").text(t.count),B(".wlfmc-products-counter-waitlist .total-products .wlfmc-total-count").text(t.count),B(".wlfmc-add-to-waitlist.wlfmc-add-to-waitlist-"+r).removeClass("exists")),(t.count<1||!i.find("[data-row-id]").length)&&j()}w()}}),!1}),t.on("adding_to_cart","body",function(t,e,o){void 0!==e&&void 0!==o&&e.closest(".wlfmc-wishlist-table,.wlfmc-save-for-later-table").length&&(o.wishlist_id=e.closest(".wlfmc-wishlist-table,.wlfmc-save-for-later-table").data("id"),o.wishlist_type=e.closest(".wlfmc-wishlist-table,.wlfmc-save-for-later-table").data("wishlist-type"),o.customer_id=e.closest(".wlfmc-wishlist-table,.wlfmc-save-for-later-table").data("customer-id"),o.is_owner=e.closest(".wlfmc-wishlist-table,.wlfmc-save-for-later-table").data("is-owner"),"undefined"!=typeof wc_add_to_cart_params&&(wc_add_to_cart_params.cart_redirect_after_add=wlfmc_l10n.redirect_to_cart))}),t.on("added_to_cart","body",function(t,e,o,a){if(void 0!==a&&a.closest(".wlfmc-wishlist-table").length){"undefined"!=typeof wc_add_to_cart_params&&(wc_add_to_cart_params.cart_redirect_after_add=f);var i=(d=(s=a.closest("[data-row-id]")).closest(".wlfmc-wishlist-fragment")).data("fragment-options"),n=s.data("row-id"),r=d.find(".wlfmc-wishlist-table").data("id");d.find(".wlfmc-wishlist-table").data("token");if(a.removeClass("added"),s.find(".added_to_cart").remove(),wlfmc_l10n.remove_from_wishlist_after_add_to_cart&&i.is_user_owner){if(null!=m){for(var l=m.length,c=0;c<=l-1;c++)void 0!==m[c]&&m[c].wishlist_id==r&&m[c].product_id==n&&m.splice(c,1);I(JSON.stringify(m))}B(".wlfmc-products-counter-wrapper").find('[data-row-id="'+n+'"]').remove(),B(".wlfmc-wishlist-form").find('[data-row-id="'+n+'"]').remove(),B(".wlfmc-products-counter-wrapper  .products-counter-number").text(m.length),B(".wlfmc-products-counter-wishlist .total-products .wlfmc-total-count").text(m.length),B(".wlfmc-add-to-wishlist.wlfmc-add-to-wishlist-"+n).removeClass("exists"),m.length&&0!==m.length&&d.find("[data-row-id]").length||(B(".wlfmc-wishlist-table-wrapper").empty(),j())}}else{var s,d;void 0!==a&&a.closest(".wlfmc-save-for-later-table").length&&(i=(d=(s=a.closest("[data-item-id]")).closest(".wlfmc-wishlist-fragment")).data("fragment-options"),d=s.data("item-id"),a.removeClass("added"),s.find(".added_to_cart").remove(),i.is_user_owner&&(B(".wlfmc-save-for-later-form").find('[data-item-id="'+d+'"]').remove(),B(".wlfmc-save-for-later-items-wrapper .save-for-later-items-wrapper tr").length||B(".wlfmc-save-for-later-table-wrapper").empty()))}}),t.on("add_to_cart_message","body",function(t,e,o){var a=B(".woocommerce-notices-wrapper .woocommerce-error,.woocommerce-notices-wrapper .woocommerce-message");o.removeClass("loading"),0===a.length?B("#wlfmc-wishlist-form").prepend(e):a.fadeOut(300,function(){B(this).closest(".woocommerce-notices-wrapper").replaceWith(e).fadeIn()})}),t.on("cart_page_refreshed","body",w),t.on("click",".wlfmc_delete_item",function(){var o=B(this),t=o.attr("data-product-id"),e=o.attr("data-wishlist-id"),a=o.attr("data-item-id"),i=B(".wlfmc-add-to-wishlist-"+t),t={action:wlfmc_l10n.actions.delete_item_action,nonce:wlfmc_l10n.ajax_nonce.delete_item_nonce,context:"frontend",wishlist_id:e,item_id:a};return B.ajax({url:wlfmc_l10n.ajax_url,data:t,method:"post",dataType:"json",beforeSend:function(t){"rest_api"===wlfmc_l10n.ajax_mode&&t.setRequestHeader("X-WP-Nonce",wlfmc_l10n.nonce),v(o)},complete:function(){b(o)},success:function(t){t.fragments;var e=t.message;"true"===t.result&&(i.removeClass("exists"),null!=m&&(m=B.grep(m,function(t){return t.item_id!==parseInt(a)}),I(JSON.stringify(m)))),o.closest(".wlfmc-remove-button").length||""===B.trim(e)||toastr.error(e),"true"===t.result&&""!==B.trim(wlfmc_l10n.labels.product_removed_text)&&toastr.error(wlfmc_l10n.labels.product_removed_text),j(),w(),B("body").trigger("wlfmc_removed_from_wishlist",[o,i,t])}}),!1}),t.on("change","#bulk_add_to_cart,#bulk_add_to_cart2",function(){var t=B(this),e=t.closest(".wlfmc-wishlist-table,.wlfmc-save-for-later-table").find("[data-row-id]").find('input[type="checkbox"]:not(:disabled)');t.is(":checked")?(e.prop("checked","checked").trigger("change"),B("#bulk_add_to_cart").prop("checked","checked"),B("#bulk_add_to_cart2").prop("checked","checked")):(e.prop("checked",!1).trigger("change"),B("#bulk_add_to_cart").prop("checked",!1),B("#bulk_add_to_cart2").prop("checked",!1))}),t.on("submit",".wlfmc-popup-form",function(){return!1}),t.on("found_variation",function(t,e){t=B(t.target).data("product_id");e.product_id=t,B(document).trigger("wlfmc_show_variation",e)}),t.on("wlfmc_show_variation",function(t,e){B(t.target);var o,a,i,n,r,l,c=e.product_id,s=e.variation_id,t=B('.wlfmc-add-to-wishlist [data-parent-product-id="'+c+'"]'),d=t.closest(".wlfmc-add-to-wishlist").data("enable-outofstock");c&&s&&t.length&&(d||e.is_in_stock?t.closest(".wlfmc-add-to-wishlist").removeClass("hide"):t.closest(".wlfmc-add-to-wishlist").addClass("hide"),(d=t.closest(".wlfmc-add-to-wishlist").attr("data-popup-id"))&&(d=B("#"+d)).length&&(o=d.data("product-title"),l=wlfmc_l10n.labels.popup_content,a=wlfmc_l10n.labels.popup_title,i=d.data("image-size"),n=d.find(".wlfmc-popup-header img").data("src"),r=d.find(".wlfmc-parent-product-price").html(),r=""!==e.price_html?e.price_html:r,l=(l=l.replace("{product_price}",r)).replace("{product_name}",o),a=(a=a.replace("{product_price}",r)).replace("{product_name}",o),e.image_id&&"true"==d.data("use-featured")&&(n="large"===i?e.image.full_src:"thumbnail"===i?e.image.thumb_src:e.image.src),d.find(".wlfmc-popup-title").html(a),d.find(".wlfmc-popup-desc").html(l),d.find(".wlfmc-popup-header img").attr("src",n)),t.each(function(){var t=B(this),o=t.closest(".wlfmc-add-to-wishlist");t.attr("data-parent-product-id",c),t.attr("data-product-id",s),o.length&&o.removeClass(function(t,e){return e.match(/wlfmc-add-to-wishlist-\S+/g).join(" ")}).addClass("wlfmc-add-to-wishlist-"+s).removeClass("exists"),o.find(".wlfmc-addtowishlist a").attr("href",o.attr("data-add-url").replace("#product_id",s)),o.find(".wlfmc-removefromwishlist a").attr("href",o.attr("data-remove-url").replace("#product_id",s)),B.each(m,function(t,e){void 0!==e&&e.product_id&&e.product_id==s&&(o.addClass("exists"),o.find(".wlfmc_delete_item").attr("data-wishlist-id",e.wishlist_id),o.find(".wlfmc_delete_item").attr("data-item-id",e.item_id))})}))}),t.on("reset_data",function(t){var e,o,a,i,n,r,l=B(t.target).data("product_id"),t=B('.wlfmc-add-to-wishlist [data-parent-product-id="'+l+'"]');l&&t.length&&(t.closest(".wlfmc-add-to-wishlist").removeClass("hide"),(e=t.closest(".wlfmc-add-to-wishlist").attr("data-popup-id"))&&(e=B("#"+e)).length&&(o=e.find(".wlfmc-parent-product-price").html(),a=e.data("product-title"),r=wlfmc_l10n.labels.popup_content,i=wlfmc_l10n.labels.popup_title,n=e.find(".wlfmc-popup-header img").data("src"),r=(r=r.replace("{product_price}",o)).replace("{product_name}",a),i=(i=i.replace("{product_price}",o)).replace("{product_name}",a),e.find(".wlfmc-popup-title").html(i),e.find(".wlfmc-popup-desc").html(r),e.find(".wlfmc-popup-header img").attr("src",n)),t.each(function(){var t=B(this),o=t.closest(".wlfmc-add-to-wishlist");t.attr("data-parent-product-id",l),t.attr("data-product-id",l),o.length&&o.removeClass(function(t,e){return e.match(/wlfmc-add-to-wishlist-\S+/g).join(" ")}).addClass("wlfmc-add-to-wishlist-"+l).removeClass("exists"),o.find(".wlfmc-addtowishlist a").attr("href",o.attr("data-add-url").replace("#product_id",l)),o.find(".wlfmc-removefromwishlist a").attr("href",o.attr("data-remove-url").replace("#product_id",l)),B.each(m,function(t,e){void 0!==e&&e.product_id&&e.product_id==l&&(o.addClass("exists"),o.find(".wlfmc_delete_item").attr("data-wishlist-id",e.wishlist_id),o.find(".wlfmc_delete_item").attr("data-item-id",e.item_id))})}))}),t.on("wlfmc_reload_fragments",j),t.on("wlfmc_fragments_loaded",function(t,e,o,a){a&&B(".variations_form").find(".variations select").last().trigger("change")}),t.on("click",".wlfmc-tabs a:not(.external-link)",function(t){t.preventDefault();t=B(this).data("content");return B(".wlfmc-tab-content").hide(),B(this).closest(".wlfmc-tabs-wrapper").removeClass("active-tab-cart active-tab-save-for-later"),B(this).closest(".wlfmc-tabs-wrapper").addClass("active-tab-"+t),B(this).closest(".wlfmc-tabs-wrapper").find(".wlfmc-tabs a").removeClass("nav-tab-active"),B(this).addClass("nav-tab-active"),B(".wlfmc_content_"+t).show(),window.history.replaceState("","",function(t,e,o){var a="",i=t.split("?"),t=i[0],n=i[1],r="";if(n){i=n.split("&");for(var l=0;l<i.length;l++)i[l].split("=")[0]!==e&&(a+=r+i[l],r="&")}n=r+""+e+"="+o.replace("#","");return t+"?"+a+n}(window.location.href,"tab",t)),!1}),t.on("click",".wlfmc-save-for-later-form a.wlfmc-close-notice",function(t){var e,o;if(t.preventDefault(),x())return t="wlfmc_save_for_later_notice",e=!0,(o=new Date).setDate(o.getDate()+9125),document.cookie=t+"="+escape(e)+"; expires="+o.toUTCString()+"; path=/",B(this).closest(".wlfmc-notice-wrapper").animate({opacity:0},"slow").remove(),!1;window.alert(wlfmc_l10n.labels.cookie_disabled)}),t.on("click",".wlfmc-accordion-header",function(t){return t.preventDefault(),B(this).hasClass("active")?(B(this).removeClass("active"),B(this).next(".wlfmc-accordion-panel").slideUp()):(B(this).addClass("active"),B(this).next(".wlfmc-accordion-panel").slideDown()),!1}),"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?(t.on("touchstart",".wlfmc-counter-wrapper.show-list-on-hover,.wlfmc-counter-wrapper.show-list-on-click",function(t){o=!1}),t.on("touchmove",".wlfmc-counter-wrapper.show-list-on-hover,.wlfmc-counter-wrapper.show-list-on-click",function(t){o=!0}),t.on("touchend",".wlfmc-counter-wrapper.show-list-on-hover .wlfmc-counter.has-dropdown,.wlfmc-counter-wrapper.show-list-on-click  .wlfmc-counter.has-dropdown",function(t){var e=B(this).closest(".wlfmc-counter-wrapper");e.hasClass("wlfmc-first-touch")?o||_.call(B(".wlfmc-counter-wrapper"),t):(t.preventDefault(),u.call(this,t),e.addClass("wlfmc-first-touch"))}),t.on("touchend",":not(.wlfmc-counter-wrapper.show-list-on-hover):not(.wlfmc-counter-wrapper.show-list-on-click)",function(t){0===B(t.target).closest(".wlfmc-counter-wrapper").length&&_.call(B(".wlfmc-counter-wrapper"),t)}),t.on("touchend",".wlfmc-counter-wrapper .wlfmc-counter.has-dropdown a:not(.remove_from_wishlist)",function(t){return t.preventDefault(),window.location.href=B(this).attr("href"),!1})):(t.on("click",".wlfmc-counter-wrapper.show-list-on-click .wlfmc-counter.has-dropdown",function(t){t.preventDefault();t=B(".dropdown_"+B(this).attr("data-id"))||B(this).closest(".wlfmc-counter-wrapper").find(".wlfmc-counter-dropdown");return d(t.closest(".wlfmc-counter-wrapper")),c(t),t.toggleClass("lists-show"),!1}),t.on("click",function(t){var e=B(".wlfmc-counter-wrapper.show-list-on-click .wlfmc-counter.has-dropdown");e===t.target||e.has(t.target).length||B(".wlfmc-counter-dropdown").removeClass("lists-show")}),t.on("mouseover",".wlfmc-counter-wrapper.show-list-on-hover .wlfmc-counter-dropdown",function(t){return t.preventDefault(),B(this).addClass("lists-show"),!1}),t.on("mouseout",".wlfmc-counter-wrapper.show-list-on-hover .wlfmc-counter-dropdown",function(t){return t.preventDefault(),B(this).removeClass("lists-show"),!1}),t.on("mouseover",".wlfmc-counter-wrapper.show-list-on-hover .wlfmc-counter.has-dropdown",function(t){t.preventDefault();t=B(".dropdown_"+B(this).attr("data-id"))||B(this).closest(".wlfmc-counter-wrapper").find(".wlfmc-counter-dropdown");return B(t).addClass("lists-show"),d(t.closest(".wlfmc-counter-wrapper")),c(t),!1}),t.on("mouseout",".wlfmc-counter-wrapper.show-list-on-hover .wlfmc-counter.has-dropdown",function(t){t.preventDefault();t=B(".dropdown_"+B(this).attr("data-id"));return B(t).removeClass("lists-show"),!1}),B(".wlfmc-counter-wrapper.show-list-on-hover .wlfmc-counter.has-dropdown").hoverIntent({interval:0,timeout:100,over:u,out:_})),l(),new MutationObserver(function(t){for(var e in t){e=t[e];"childList"===e.type&&(void 0!==e.addedNodes&&e.addedNodes.forEach(a),void 0!==e.removedNodes&&e.removedNodes.forEach(i))}}).observe(document.body,{childList:!0}),J(),R(),X(),A(),B(document).on("click",".wlfmc-list .product-components",function(t){t.preventDefault();var t=B(this).closest("tr"),e=t.find(".wlfmc-absolute-meta-data"),o=t.next(".wlfmc-row-meta-data").filter(".wlfmc-row-meta-data"),a=o.hasClass("hide");return e.fadeToggle(),o.toggleClass("hide"),t.toggleClass("show-meta-data",a),!1}),B(document).on("click",".wlfmc-list .close-components",function(t){t.preventDefault();t=B(this).closest("tr");return t.find(".wlfmc-absolute-meta-data").fadeToggle(),t.removeClass("show-meta-data"),!1}),B(document).on("click",".wlfmc-popup-trigger:not(.wlfmc-disabled)",function(t){t.preventDefault();var t=B(this).data("popup-id"),e=B("#"+t),o={absolute:!1,color:"#333",transition:"all 0.3s",horizontal:e.data("horizontal"),vertical:e.data("vertical")};return e.popup(o),B("#"+t).popup("show"),!1}),B(document).on("click",".wlfmc-popup-close",function(t){t.preventDefault();t=B(this).data("popup-id");return B("#"+t).popup("hide"),!1}),z(),E(),h()}).trigger("wlfmc_init"),B(document).on("jet-filter-content-rendered",i).on("jet-woo-builder-content-rendered",i).on("jet-engine/listing-grid/after-load-more",i).on("jet-engine/listing-grid/after-lazy-load",i).on("jet-cw-loaded",i),B(document).on("ready",j),new MutationObserver(function(t){t.forEach(function(t){0<B(".woocommerce-product-gallery__wrapper .wlfmc-top-of-image").length&&L(),0<B(".pp-single-product .entry-summary > .wlfmc-top-of-image").length&&0<B(".pp-single-product .entry-summary .single-product-image").length&&B(".pp-single-product").each(function(){var t=B(this).find(".wlfmc-top-of-image"),e=B(this).find(".single-product-image");0<t.length&&0<e.length&&t.appendTo(e)})})}).observe(B("body")[0],{childList:!0,subtree:!0}),B(window).on("scroll resize",function(){B(".wlfmc-counter-dropdown").each(function(){c(B(this))})});var O,q=!0,T=wlfmc_l10n.wishlist_hash_key,N=T+"_products",H=T+"_waitlist",P=T+"_lang";try{q="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("wlfmc","test"),window.sessionStorage.removeItem("wlfmc"),window.localStorage.setItem("wlfmc","test"),window.localStorage.removeItem("wlfmc")}catch(t){q=!1}function I(t){q&&(localStorage.setItem(N,t),sessionStorage.setItem(N,t)),f(JSON.parse(t))}function W(t){q&&(localStorage.setItem(H,t),sessionStorage.setItem(H,t)),D(JSON.parse(t))}if(wlfmc_l10n.is_cache_enabled&&void 0!==B.fn.block&&B(".wlfmc-wishlist-table-wrapper, .wlfmc-save-for-later-table-wrapper").fadeTo("400","0.6").block({message:null,overlayCSS:{background:"transparent url("+wlfmc_l10n.ajax_loader_url+") no-repeat center",backgroundSize:"80px 80px",opacity:1}}),q){B(window).on("storage onstorage",function(t){(N===t.originalEvent.key&&localStorage.getItem(N)!==sessionStorage.getItem(N)||H===t.originalEvent.key&&localStorage.getItem(H)!==sessionStorage.getItem(H))&&j()}),B(window).on("pageshow",function(t){t.originalEvent.persisted&&j()});try{if(wlfmc_l10n.is_cache_enabled)throw"Need Update wishlist data";if(wlfmc_l10n.update_wishlists_data||null!==e&&e!==localStorage.getItem(P)||localStorage.getItem(N)!==JSON.stringify(o)||localStorage.getItem(H)!==JSON.stringify(a))throw localStorage.setItem(N,""),localStorage.setItem(H,""),localStorage.setItem(P,""),f(o),D(a),"Need Update wishlist data";localStorage.getItem(N)&&(O=JSON.parse(localStorage.getItem(N)),"object"===_typeof(O)&&null!==O&&f(O)),localStorage.getItem(H)&&(O=JSON.parse(localStorage.getItem(H)),"object"===_typeof(O)&&null!==O&&D(O)),k(B(".wlfmc-wishlist-table-wrapper, .wlfmc-save-for-later-table-wrapper"))}catch(t){console.log(t),j()}}else j();"undefined"!=typeof wp&&wp.customize&&wp.customize.selectiveRefresh&&wp.customize.widgetsPreview&&wp.customize.widgetsPreview.WidgetPartial&&wp.customize.selectiveRefresh.bind("partial-content-rendered",function(){j()})})}(jQuery);